<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Dashboard Commercial</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
   body { font-family: sans-serif; margin: 40px; background: #f7f7f7; }
   h1 { color: #333; }
   table { border-collapse: collapse; width: 100%; margin-top: 1em; background: white; }
   th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
   th { background: #eee; }
   form { margin-bottom: 2em; background: #fff; padding: 10px; border-radius: 4px; }
   input { padding: 6px; margin: 4px; }
   button { padding: 6px 12px; cursor: pointer; }
</style>
</head>
<body>
<h1>üèÜ Dashboard Commercial</h1>
<form id="form">
<input name="collaborateur" placeholder="Collaborateur" required>
<input name="client" placeholder="Client" required>
<label>Date closing :</label>
<input name="dateClosing" type="date">
<label>Date d√©marrage :</label>
<input name="dateDemarrage" type="date">
<button type="submit">Ajouter</button>
</form>
<table id="table">
<thead>
<tr>
<th>Collaborateur</th>
<th>Client</th>
<th>Date closing</th>
<th>Date d√©marrage</th>
<th></th>
</tr>
</thead>
<tbody></tbody>
</table>
<script>
   const backend = "https://salesdashboard-backend-hjxn.onrender.com"; // ‚Üê ton URL Render ici
   async function loadWins() {
     const res = await fetch(`${backend}/wins`);
     const wins = await res.json();
     const tbody = document.querySelector("#table tbody");
     tbody.innerHTML = "";
     for (const w of wins) {
       const tr = document.createElement("tr");
       tr.innerHTML = `
<td>${w.collaborateur}</td>
<td>${w.client}</td>
<td>${w.dateClosing || "-"}</td>
<td>${w.dateDemarrage || "-"}</td>
<td><button onclick="deleteWin(${w.id})">üóëÔ∏è</button></td>
       `;
       tbody.appendChild(tr);
     }
   }
   async function deleteWin(id) {
     await fetch(`${backend}/wins/${id}`, { method: "DELETE" });
     loadWins();
   }
   document.getElementById("form").addEventListener("submit", async (e) => {
     e.preventDefault();
     const data = Object.fromEntries(new FormData(e.target).entries());
     await fetch(`${backend}/wins`, {
       method: "POST",
       headers: { "Content-Type": "application/json" },
       body: JSON.stringify(data),
     });
     e.target.reset();
     loadWins();
   });
   loadWins();
</script>
</body>
</html>
